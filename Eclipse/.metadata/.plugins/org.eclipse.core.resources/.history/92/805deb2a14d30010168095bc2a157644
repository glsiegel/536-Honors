package edu.error;

import edu.data.CodeSection;
import edu.data.Expr;
import edu.data.Stmt;

/**
 * Poorly-named class.
 * This operates for both name and type errors.
 * Given a message and a statement or an expression, indicates an error has
 * occurred.
 */
public class TypeFailure extends edu.error.Error {


    public TypeFailure(CodeSection section, String msg) {
        super(section, msg);
    }
    
    public static class ExprTypeFailure extends TypeFailure {
        public final Expr expr;

        public ExprTypeFailure(Expr expr, String msg) {
            super(expr.section, msg);
            this.expr = expr;
            
        }

    }
    public static class StmtTypeFailure extends TypeFailure {
        public final Stmt stmt;

        public StmtTypeFailure(Stmt stmt, String msg) {
            super(stmt.section, msg);
            this.stmt = stmt;
        }
    }

    // convenience method
    public static TypeFailure New(Expr expr, String msg) {
        return new ExprTypeFailure(expr, msg);
    }

    // convenience method
    public static TypeFailure New(Stmt stmt, String msg) {
        return new StmtTypeFailure(stmt, msg);
    }
}
