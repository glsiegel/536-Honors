package error;

import data.CodeSection;
import data.Expr;
import data.Stmt;

/**
 * Poorly-named class.
 * This operates for both name and type errors.
 * Given a message and a statement or an expression, indicates an error has
 * occurred.
 */
public class VisitorError extends error.IError {


    public VisitorError(CodeSection section, String msg) {
        super(section, msg);
    }
    
    public static class ExprVisitorError extends VisitorError {
        public final Expr expr;

        public ExprVisitorError(Expr expr, String msg) {
            super(expr.section, msg);
            this.expr = expr;
            
        }

    }
    public static class StmtVisitorError extends VisitorError {
        public final Stmt stmt;

        public StmtVisitorError(Stmt stmt, String msg) {
            super(stmt.section, msg);
            this.stmt = stmt;
        }
    }

    // convenience method
    public static VisitorError New(Expr expr, String msg) {
        return new ExprVisitorError(expr, msg);
    }

    // convenience method
    public static VisitorError New(Stmt stmt, String msg) {
        return new StmtVisitorError(stmt, msg);
    }
}
